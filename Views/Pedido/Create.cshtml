@model Ecommerce.Models.ClienteCheckoutView
@{
    ViewData["Title"] = "Finalizar pedido (PIX)";
    var itens = ViewBag.Itens as List<Ecommerce.Models.CartItem>;
    decimal total = ViewBag.Total ?? 0m;
}

<h2>Finalizar pedido (PIX)</h2>

<h4>Resumo do carrinho</h4>
<table class="table">
    <thead>
    <tr>
        <th>Produto</th>
        <th>Preço</th>
        <th>Qtd</th>
        <th>Subtotal</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var i in itens)
    {
        <tr>
            <td>@i.NomeProduto</td>
            <td>R$ @i.PrecoUnitario.ToString("0.00")</td>
            <td>@i.Quantidade</td>
            <td>R$ @i.Subtotal.ToString("0.00")</td>
        </tr>
    }
    </tbody>
    <tfoot>
    <tr>
        <th colspan="3" class="text-end">Total</th>
        <th>R$ @total.ToString("0.00")</th>
    </tr>
    </tfoot>
</table>

<hr />

<h4>Dados do cliente</h4>
<form asp-action="Pagamento" method="get">
    <input type="hidden" name="total" value="@((decimal)(ViewBag.Total ?? 0m))" />
    <div class="mb-3">
        <label class="form-label">Nome</label>
        <input asp-for="NomeCliente" class="form-control" required />
    </div>
    <div class="mb-3">
        <label class="form-label">E-mail</label>
        <input asp-for="Email" type="email" class="form-control" required />
    </div>
    <div class="mb-3">
        <label class="form-label">Telefone</label>
        <input asp-for="Telefone" class="form-control" />
    </div>
    <div class="mb-3">
        <label class="form-label">CPF</label>
        <input asp-for="Cpf" class="form-control" />
    </div>

    <div class="alert alert-success">
        Pagamento: <strong>PIX</strong> (QR Code + Copia e Cola). Será gerado no próximo passo.
    </div>

    <button class="btn btn-success btn-lg">Gerar PIX</button>
    <a asp-controller="Carrinho" asp-action="Index" class="btn btn-secondary">Voltar</a>
</form>
